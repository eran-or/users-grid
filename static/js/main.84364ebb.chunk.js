(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},192:function(e,t){!function(e){var t={hospitals:[{id:1,name:"Saint George"},{id:2,name:"Father Dave"},{id:3,name:"Ichilov"},{id:4,name:"Assuta"},{id:5,name:"Saint Claire"},{id:6,name:"Saint Nitsan"}],users:[{id:1,first_name:"Clarence J.",last_name:"Carpenter",email:"ClarenceJCarpenter@teleworm.us",permissions:{all_hospitals:!1,hospitals:[2,6]}},{id:2,first_name:"Rebecca",last_name:"Caballero",email:"RebeccaRCaballero@teleworm.us",permissions:{all_hospitals:!1,hospitals:[2,3]}},{id:3,first_name:"Peter",last_name:"Deguzman-Flores",email:"peter.flor@gmail.com",permissions:{all_hospitals:!1,hospitals:[2,6]}},{id:4,first_name:"Dumby",last_name:"Dumb",email:"dumb.eldore@hogwarts.us",permissions:{all_hospitals:!1,hospitals:[]}},{id:5,first_name:"Peggy J.",last_name:"Moore",email:"PeggyJMoore@armyspy.com",permissions:{all_hospitals:!1,hospitals:[1,2,3,4,6]}},{id:6,first_name:"Mena",last_name:"Hell",email:"i.am.the.fucking.manager@cool.com",permissions:{all_hospitals:!0,hospitals:[]}},{id:7,first_name:"Karen",last_name:"Kumar",email:"KarenMKumar@rhyta.com",permissions:{all_hospitals:!1,hospitals:[6]}}],next_user_id:8};function n(e,t,n,r){if(Math.random()<.2)r({success:!1,error:t+": Database is busy"});else try{n(e())}catch(a){r({success:!1,error:a})}}function r(e){var t=parseInt(Math.random()<.2?5e3*Math.random():300*Math.random());setTimeout(e,t)}function a(e,t){return function(){var a=[].slice.call(arguments);return new Promise((function(s,i){r(n(Object.bind.apply(e,[null].concat(a)),t,s,i))}))}}function s(e){return Object.assign({},e,{permissions:{all_hospitals:e.permissions.all_hospitals,hospitals:[].concat(e.permissions.hospitals)}})}function i(e){return Object.assign({},e)}e.medAPI={users:{list:a((function(){return t.users.map(s)}),"Failed listing users"),get:a((function(e){var n=t.users.filter((function(t){return t.id===e}));if(1!==n.length)throw new Error("Wrong user_id");return s(n[0])}),"Failed getting specified user"),add:a((function(e,n,r,a,i){if("boolean"!==typeof a)throw new Error("all_hospitals_permission should be boolean");if(!Array.isArray(i))throw new Error("hospitals_permissions should be an array");if(!e||!n||!r)throw new Error("All fields are required");if(t.users.filter((function(e){return e.email===r})).length>0)throw new Error("User with the given email already exists");i.map((function(e){if(0===t.hospitals.filter((function(t){return t.id===e})).length)throw new Error("Invalid hospital id: "+e);return e}));var o={id:t.next_user_id++,first_name:e,last_name:n,email:r,permissions:{all_hospitals:a,hospitals:[].concat(i)}};return t.users.push(o),{success:!0,user:s(o)}}),"Failed getting specified user"),update:a((function(e,n){var r=t.users.filter((function(t){return t.id===e}));if(1!==r.length)throw new Error("Wrong user_id");var a=r[0];if(n.id&&n.id!==e)throw new Error("User ID can't be changed");if(delete n.id,n.permissions){if("boolean"!==typeof n.permissions.all_hospitals)throw new Error("permissions.all_hospitals should be boolean");if(!Array.isArray(n.permissions.hospitals))throw new Error("permissions.hospitals should be an array")}return!n.permissions||n.permissions.all_hospitals&&n.permissions.hospitals?{success:!1}:{success:!0,user:Object.assign(a,s(n))}}),"Failed updating specified user")},hospitals:{list:a((function(){return t.hospitals.map(i)}),"Failed listing hospitals"),get:a((function(e){var n=t.hospitals.filter((function(t){return t.id===e}));if(1!==n.length)throw new Error("Wrong hospital_id");return i(n[0])}),"Failed getting specified hospital")}}}(window)},193:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(26),i=n.n(s),o=(n(103),n(104),n(42)),c=n(7),l=n(15),u=n(78),m=n.n(u),d=n(16),f=n(28),p=n.n(f),h=n(79),b=n.n(h);function E(){var e=Object(l.a)(["\n    border:",";\n    text-align:center;\n    color:white;\n    text-decoration:none;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    box-sizing: border-box;\n    border-bottom: 5px solid transparent;\n    padding-top:5px;\n"]);return E=function(){return e},e}var v=Object(d.a)(o.b)(E(),(function(e){return e.border?e.border:""})),_=function(e){return a.a.createElement("header",{className:p.a.header},a.a.createElement("img",{src:m.a,alt:"",height:"24"}),a.a.createElement("div",{className:p.a.nav},a.a.createElement(v,{exact:!0,to:"/users",activeClassName:p.a["header-active-link"]},"Users"),a.a.createElement(v,{exact:!0,to:"/alerts",activeClassName:p.a["header-active-link"]},"Alerts")),a.a.createElement("div",{className:p.a["header-right"]},a.a.createElement("div",{className:p.a["logo-icon"]},a.a.createElement("img",{src:b.a,alt:"",width:"24"})),a.a.createElement("div",{className:p.a["header-right-details"]},a.a.createElement("div",null,"Medigate User"),a.a.createElement("div",null,"Hi"),a.a.createElement("div",null,"LogOut"))))},g=n(57),y=n.n(g),O=n(21),w=n(94),x=n(83),j=(n(109),function(e){return function(t){var n=t.onClose,s=t.onOpen,i=t.children,o=Object(w.a)(t,["onClose","onOpen","children"]),c=Object(r.useState)(!1),l=Object(O.a)(c,2),u=l[0],m=l[1],d=Object(r.useState)(!0),f=Object(O.a)(d,2),p=f[0],h=f[1],b=function(){m(!1),n&&n()};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{disabled:u,onClick:function(){s&&s(),p&&h(!1),m(!0)}},i),!p&&a.a.createElement(x.a,Object.assign({width:400,height:394},o,{visible:u,onClose:b,onAnimationEnd:function(){u||h(!0)}}),a.a.createElement(e,Object.assign({},t,{onClose:b}))))}}),k=function(e){var t=e.children;return a.a.createElement(a.a.Fragment,null," ",t," ")};k.displayName="ModalTriger";var N=n(19),S=n.n(N),C=n(27),A=n(20),I=n(88),D=n.n(I),R=n(37),P=n.n(R),U=n(215),F=n(47),M=n(38),L=n.n(M),T=n(217),W=n(219),H=n(6);function X(){var e=Object(l.a)(["\nmargin: 10px 0;\n"]);return X=function(){return e},e}var K=d.a.hr(X()),V=function(e){return a.a.createElement(W.a,{className:e.className,control:a.a.createElement(T.a,e),label:e.label})},J=Object(H.a)({root:{color:"#4EC185","&$checked":{color:"#4EC185"}},checked:{}})((function(e){return a.a.createElement(V,Object.assign({color:"default"},e))})),z=function(){return window.medAPI.hospitals.list().then((function(e){return e})).catch((function(e){return e}))},B=function(e){var t=e.onChange,n=e.clear,s=e.selectedPermissions,i=e.editMode,o=Object(r.useState)(!1),c=Object(O.a)(o,2),l=c[0],u=c[1],m=Object(r.useState)([]),d=Object(O.a)(m,2),f=d[0],p=d[1],h=Object(r.useState)([]),b=Object(O.a)(h,2),E=b[0],v=b[1];Object(r.useEffect)((function(){var e=0;function t(){return n.apply(this,arguments)}function n(){return(n=Object(C.a)(S.a.mark((function n(){var r;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z();case 2:r=n.sent,Array.isArray(r)?p(r):r.success||(e<10?(e++,t()):console.error(r.error));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t()}),[]),Object(r.useEffect)((function(){var e,t=s?s.reduce((function(e,t){return e[t]=!0,e}),{}):{};e=s?f.map((function(e){return!!t[e.id]})):f.map((function(e){return!1})),v(e)}),[f,s]),Object(r.useEffect)((function(){if(n){var e=f.map((function(e){return!1}));u(!1),v(e)}}),[n,f]);var _=function(e,n){var r=Object(F.a)(E);r[e]=n.target.checked,v(r);var a=r.filter((function(e){return e})).length===r.length;if(a)t(f),r=r.map((function(e){return!1})),v(r),u(a);else{var s=f.reduce((function(e,t,n){return r[n]&&e.push(t.id),e}),[]);t(s)}};return a.a.createElement(A.d,null,a.a.createElement("div",null,a.a.createElement(K,null),a.a.createElement("div",{style:{color:"#00000061",marginBottom:"10px"}},"PERMISSIONS"),a.a.createElement("div",{className:L.a.all_hospitals},a.a.createElement(A.b,{className:L.a.all_hospitals,disabled:!!s&&!i,name:"all_hospitals",label:"All Hospitals in network",component:J,checked:l,onChange:function(e){var n=E.map((function(e){return!1}));v(n);var r=!!e.target.checked;u(r),r?t([],!0):t([])}})),a.a.createElement("div",{style:{margin:"7px 20px"}},"can view only:"),a.a.createElement("div",{className:L.a.permissions},f.map((function(e,t){var n=l||!!s&&!i;return a.a.createElement(A.b,{key:t,className:L.a.all_hospitals,name:"hospitalIds",label:e.name,component:J,checked:!!E[t],disabled:n,onChange:function(e){return _(t,e)}})})))))},q="API_ERROR",Y=function(){return function(e,t){var n=function(){return window.medAPI.users.list().then((function(e){return e})).catch((function(e){return e}))},r=0;function a(){return s.apply(this,arguments)}function s(){return(s=Object(C.a)(S.a.mark((function t(){var s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:if(s=t.sent,!Array.isArray(s)){t.next=7;break}return t.abrupt("return",e({type:"UPDATE_USERS",users:s}));case 7:if(s.success){t.next=15;break}if(!(r<10)){t.next=13;break}r++,a(),t.next=15;break;case 13:return e({type:q,err:s.error}),t.abrupt("return",s.error);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a()}},Q=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){var r=function(){var e;return(e=window.medAPI.users).add.apply(e,arguments).then((function(e){return e})).catch((function(e){return e}))},a=0;function s(){return i.apply(this,arguments)}function i(){return(i=Object(C.a)(S.a.mark((function t(){var n,i=arguments;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.apply(void 0,i);case 2:if(!(n=t.sent).success){t.next=8;break}return e(Y()),t.abrupt("return","success");case 8:if(!(n.error instanceof Object)||n.error instanceof Array){t.next=13;break}return e({type:q,err:n.error}),t.abrupt("return",{error:n.error.message});case 13:if(!(n.error.includes("Database is busy")&&a<10)){t.next=16;break}return a++,t.abrupt("return",s.apply(void 0,i));case 16:return e({type:q,err:n.error}),t.abrupt("return",{error:n.error});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return s.apply(void 0,t)}},$=function(e,t){var n=function(e,t){return window.medAPI.users.update(e,t).then((function(e){return e})).catch((function(e){return e}))};return function(r,a){var s=0;function i(e,t){return o.apply(this,arguments)}function o(){return(o=Object(C.a)(S.a.mark((function e(t,a){var o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,a);case 2:if(!(o=e.sent).success){e.next=8;break}return r(Y()),e.abrupt("return","success");case 8:if(!(o.error instanceof Object)||o.error instanceof Array){e.next=13;break}return r({type:q,err:o.error}),e.abrupt("return",{error:o.error.message});case 13:if(!(o.error.includes("Database is busy")&&s<10)){e.next=16;break}return s++,e.abrupt("return",i(t,a));case 16:return r({type:q,err:o.error}),e.abrupt("return",{error:o.error});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return i(e,t)}},G=n(23);function Z(){var e=Object(l.a)(["\n    font-weight:bold;\n    margin-bottom:15px;\n"]);return Z=function(){return e},e}function ee(){var e=Object(l.a)(["\nmargin: 10px 0;\n"]);return ee=function(){return e},e}function te(){var e=Object(l.a)(["\n  &&&{\n    font-size:10px;\n  }\n"]);return te=function(){return e},e}var ne=Object(d.a)(U.a)(te()),re=d.a.hr(ee()),ae=d.a.div(Z()),se=function(e){var t=Object(r.useState)(""),n=Object(O.a)(t,2),s=n[0],i=n[1],o=e.user,c=Object(r.useState)([]),l=Object(O.a)(c,2),u=l[0],m=l[1],d=Object(r.useState)(!1),f=Object(O.a)(d,2),p=f[0],h=f[1],b=Object(r.useState)(!1),E=Object(O.a)(b,2),v=E[0],_=E[1],g=Object(G.b)(),y=function(e,t){m(e),_(!!t)},w=!!o;return Object(r.useEffect)((function(){w&&(m(o.permissions.hospitals),_(o.permissions.all_hospitals))}),[w,o]),a.a.createElement("div",null,a.a.createElement(ae,null,w?"EDIT USER":"NEW USER"),a.a.createElement(A.d,{initialValues:{email:w?o.email:"",firstname:w?o.first_name:"",lastname:w?o.last_name:""},validate:function(e){var t={};return e.email?D.a.isEmail(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.firstname||(t.firstname="Firstname is required"),e.lastname||(t.lastname="Lastname is  required"),t},onSubmit:function(e,t){var n,r=t.setSubmitting,a=t.resetForm;n=v?[]:u;var s=e.firstname,c=e.lastname,l=e.email;function m(){return(m=Object(C.a)(S.a.mark((function e(){var t,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=6;break}return e.next=3,g(Q(s,c,l,v,n)).then((function(e){return e})).catch((function(e){return e}));case 3:t=e.sent,e.next=10;break;case 6:return r={id:o.id,first_name:s,last_name:c,email:l,permissions:{all_hospitals:v,hospitals:n}},e.next=9,g($(o.id,r)).then((function(e){return e})).catch((function(e){return e}));case 9:t=e.sent;case 10:"success"===t?(i("user saved!"),w||(a(),h(!0)),h(!1)):i(t.error);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){m.apply(this,arguments)}(),r(!1)}},(function(e){var t=e.isSubmitting;e.values;return a.a.createElement(A.c,null,a.a.createElement("div",null,a.a.createElement("div",{className:P.a.row},a.a.createElement("div",{style:{marginRight:"20px",flex:"1",height:"54px"}},a.a.createElement(A.b,{type:"text",name:"firstname"},(function(e){var t=e.field;return a.a.createElement("input",Object.assign({type:"text",placeholder:"Firstname"},t,{onChange:function(e){i(""),t.onChange(e)}}))})),a.a.createElement(A.a,{name:"firstname",component:"div",style:{color:"red"}})),a.a.createElement("div",{style:{flex:"1"}},a.a.createElement(A.b,{type:"text",name:"lastname"},(function(e){var t=e.field;return a.a.createElement("input",Object.assign({type:"text",placeholder:"Lastname"},t,{onChange:function(e){i(""),t.onChange(e)}}))})),a.a.createElement(A.a,{name:"lastname",component:"div",style:{color:"red"}}))),a.a.createElement(A.b,{type:"text",name:"email"},(function(e){var t=e.field;return a.a.createElement("input",Object.assign({type:"text",placeholder:"Email"},t,{onChange:function(e){i(""),t.onChange(e)}}))})),a.a.createElement("div",{style:{height:"8px",color:"red"}},a.a.createElement(A.a,{name:"email",component:"div"})),a.a.createElement(B,{onChange:y,clear:p,selectedPermissions:w?u:"",editMode:w}),a.a.createElement(re,null),a.a.createElement("div",{className:P.a.add_user_button},a.a.createElement("div",{className:"user saved!"===s?P.a.info:P.a.error},s),a.a.createElement(ne,{type:"submit",color:"primary",variant:"contained",disabled:t},w?"SAVE":"ADD USER"))))})))},ie=n(218),oe=n(89),ce=n.n(oe),le=n(216),ue=n(33),me=n.n(ue),de=n(91),fe=n.n(de),pe=n(90),he=n.n(pe);function be(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n"]);return be=function(){return e},e}function Ee(){var e=Object(l.a)(["\n    display:flex;\n    justify-content:flex-end;\n    position: relative;\n    left: 30px;\n"]);return Ee=function(){return e},e}var ve=d.a.div(Ee()),_e=d.a.div(be());function ge(){var e=Object(l.a)(["\n  display:grid;\n  grid-template-columns: repeat(auto-fill, 209px);\n  grid-gap: 41px;\n  justify-items:center;\n  justify-content:center;\n"]);return ge=function(){return e},e}var ye=j((function(e){var t=e.onClose,n=e.user,r=Object(G.b)();return a.a.createElement(_e,null,a.a.createElement("h3",null,"Are you sure you want to delete this user?"),a.a.createElement("p",{style:{color:"#00000061",lineHeight:"2em",marginTop:0}},"Clicking OK will delete all user details and and move it to archive"),a.a.createElement(ve,null,a.a.createElement(U.a,{onClick:t,style:{color:"#00000061",fontWeight:"bold"}},"CANCEL"),a.a.createElement(U.a,{onClick:function(){var e;r((e=n.id,function(t,n){t({type:"ARCHIVE_USER",userId:e}),t(Y())})),t()},style:{color:"#4EC185",fontWeight:"bold"}},"OK")))})),Oe=j(se),we=d.a.div(ge());var xe=function(e){var t=Object(G.c)((function(e){return e.users.list}));return a.a.createElement(we,null,t.map((function(e){return a.a.createElement(ie.a,{key:e.id,className:me.a.card},a.a.createElement(le.a,{className:me.a["card-content"]},a.a.createElement("div",{className:me.a["actions-buttons"]},a.a.createElement(Oe,{user:e},a.a.createElement(k,null,a.a.createElement(he.a,{color:"action"}))),a.a.createElement(ye,{width:280,height:192,customStyles:{padding:"15px 30px"},showCloseButton:!1,closeMaskOnClick:!1,user:e},a.a.createElement(k,null,a.a.createElement(fe.a,{color:"action"})))),a.a.createElement("div",null,a.a.createElement(ce.a,{className:me.a.avatar,email:e.email})),a.a.createElement("strong",{className:me.a.user_name},e.first_name," ",e.last_name),a.a.createElement("small",null,e.email),a.a.createElement(B,{clear:!1,selectedPermissions:e.permissions.hospitals})))})))},je=j(se),ke=function(e){var t=Object(G.c)((function(e){return e.users.list})),n=Object(G.b)();return Object(r.useEffect)((function(){n(Y())}),[n]),a.a.createElement("div",{className:y.a.users},a.a.createElement("div",{className:y.a["add-user-button"]},a.a.createElement("div",{style:{width:"fit-content"}},a.a.createElement(je,null,a.a.createElement(k,null,a.a.createElement(U.a,{variant:"outlined",color:"primary",style:{fontWeight:"bold"}},"+ Add New User"))))),a.a.createElement(xe,{users:t}))};var Ne=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{basename:"/users-grid"},a.a.createElement(_,null),a.a.createElement(c.c,null,a.a.createElement(c.a,{exact:!0,path:"/logout"},a.a.createElement("div",null,"Logout")),a.a.createElement(c.a,{exact:!0,path:"/alerts"},a.a.createElement("div",null,"Alerts")),a.a.createElement(c.a,{exact:!0,path:"/users"},a.a.createElement(ke,null)),a.a.createElement(c.a,{path:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(192);var Se=n(31),Ce=n(92),Ae=Object(Ce.a)((function(e,t){switch(t.type){case"UPDATE_USERS":var n=t.users.filter((function(t){return!e.usersArchive.includes(t.id)}));return void(e.list=n);case q:return void(e.err=t.err);case"ARCHIVE_USER":return void(e.usersArchive=[].concat(Object(F.a)(e.usersArchive),[t.userId]));default:return e}}),{list:[],usersArchive:[]}),Ie=[n(93).a],De=Object(Se.e)(Object(Se.c)({users:Ae}),Object(Se.d)(Se.a.apply(void 0,Ie),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(G.a,{store:De},a.a.createElement(Ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},28:function(e,t,n){e.exports={header:"header_header__3ZJN9","logo-icon":"header_logo-icon__1ld10","header-right":"header_header-right__EkXue",nav:"header_nav__1c-Kh","header-active-link":"header_header-active-link__WgjYU"}},33:function(e,t,n){e.exports={card:"usersList_card__3je-i","actions-buttons":"usersList_actions-buttons__35DBO",avatar:"usersList_avatar__3SmgU","card-content":"usersList_card-content__kN7FQ",user_name:"usersList_user_name__3zi5P"}},37:function(e,t,n){e.exports={row:"userForm_row__2YCPc",add_user_button:"userForm_add_user_button__3zWuP",error:"userForm_error__2c647",info:"userForm_info__lsBKP"}},38:function(e,t,n){e.exports={all_hospitals:"permissions_all_hospitals__3tQ1-",permissions:"permissions_permissions__HkAHO"}},57:function(e,t,n){e.exports={users:"users_users__1O_pH","add-user-button":"users_add-user-button__2fOzY"}},78:function(e,t,n){e.exports=n.p+"static/media/logo_icon_inverse.7d848bdf.svg"},79:function(e,t,n){e.exports=n.p+"static/media/medigate-logo.badead22.svg"},98:function(e,t,n){e.exports=n(193)}},[[98,1,2]]]);
//# sourceMappingURL=main.84364ebb.chunk.js.map